<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="RecruitMemberDao">
  	<insert id="insertOneRecruitMember" parameterType="RecruitMemberVo">
  		INSERT INTO RECRUITMEMBER	(
								EMAIL
								, NAME		
								, PASSWORD	
								, CRT_DT			
								, SALT				
								, IS_ADMIN_YN
								, LATEST_LOGIN
								, LOGIN_FAIL_COUNT
								, MDFY_DT				
  						   	)
		VALUES				(
								#{email}
								, #{name}
								, #{password}
								, SYSDATE
								, #{salt}
								, 'N'
								, NULL
								, 0	
								, SYSDATE
							)  						   
  	</insert>
  	<select id="selectOneRecruitMember"
  			parameterType="RecruitMemberVo"
  			resultType="RecruitMemberVo">
  		
  		SELECT	EMAIL
  				, NAME
  				, PASSWORD
  				, IS_ADMIN_YN isAdminYn
  				, LOGIN_FAIL_COUNT loginFailCount
  		FROM	RECRUITMEMBER
  		WHERE	EMAIL = #{email}
  		AND		PASSWORD = #{password}  		
  	</select>
  	<select id="getSaltByEmail"
  			parameterType="RecruitMemberVo"
  			resultType="string">
  			
  		SELECT	SALT
  		FROM	RECRUITMEMBER
  		WHERE	EMAIL = #{email}
  	</select>
  	<select id="duplicateCheckByEmail"
  			parameterType="string"
  			resultType="Integer">
  		
  		SELECT	COUNT(*)
  		FROM	RECRUITMEMBER
  		WHERE	EMAIL = #{email}  	
  	</select>
  	<update id="updateOneRecruitMemberInfo"
  			parameterType="RecruitMemberVo">
  			
  		UPDATE	RECRUITMEMBER
  		SET		PASSWORD  = #{password}
  				, SALT = #{salt}
  				, MDFY_DT = SYSDATE
  		WHERE	EMAIL = #{email}
  	</update>  		
  </mapper>